<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Scanner</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .scanner-animation {
            margin-bottom: 20px;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .status {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 300px;
            height: 4px;
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: white;
            width: 0%;
            animation: progress 3s ease-out forwards;
        }
        
        @keyframes progress {
            to { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="scanner-animation">
        <div class="spinner"></div>
    </div>
    <h1>Skannar webbplats...</h1>
    <p class="status" id="status">Analyserar tillgÃ¤nglighet</p>
    <div class="progress-bar">
        <div class="progress-fill"></div>
    </div>

    <script>
        console.log('ðŸŽ¯ Mock iframe loaded');
        
        // Simulate scanning progress
        const statuses = [
            'Analyserar sidstruktur...',
            'Kontrollerar tillgÃ¤nglighet...',
            'Granskar WCAG-kriterier...',
            'SammanstÃ¤ller resultat...'
        ];
        
        let statusIndex = 0;
        const statusInterval = setInterval(() => {
            if (statusIndex < statuses.length) {
                document.getElementById('status').textContent = statuses[statusIndex];
                statusIndex++;
            }
        }, 800);
        
        // Send mock report data after delay
        setTimeout(() => {
            clearInterval(statusInterval);
            document.getElementById('status').textContent = 'Scanning klar!';
            
            // Mock report data with realistic structure
            const mockReportData = {
                verdict: 'bad', // 'good' or 'bad'
                score: 62,
                reports: {
                    Clickables: {
                        verdict: 'bad',
                        score: 55,
                        issues: 8
                    },
                    Titles: {
                        verdict: 'bad',
                        score: 60,
                        issues: 5
                    },
                    Graphics: {
                        verdict: 'bad',
                        score: 50,
                        issues: 12
                    },
                    Forms: {
                        verdict: 'good',
                        score: 90,
                        issues: 1
                    },
                    Document: {
                        verdict: 'good',
                        score: 95,
                        issues: 0
                    },
                    Readability: {
                        verdict: 'bad',
                        score: 65,
                        issues: 6
                    }
                }
            };
            
            console.log('ðŸ“¨ Sending mock report data:', mockReportData);
            
            window.parent.postMessage({
                acsbAceResults: mockReportData
            }, '*');
            
            console.log('âœ… Mock scan complete');
        }, 3000);
    </script>
</body>
</html>
